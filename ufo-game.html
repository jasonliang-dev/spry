  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Spry">
    <meta name="description" content="Spry is a delightfully small 2D game framework made for rapid prototyping and game jams. Inspired by LÖVE.">
    <meta name="keywords" content="game, development, love2d, lua, framework">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="author" content="Jason Liang">
    <meta name="og:title" content="UFO Game | Spry">
    <meta name="og:site_name" content="Spry">
    <meta name="og:url" content="https://jasonliang.js.org/spry/">
    <meta name="og:description" content="Spry is a delightfully small 2D game framework made for rapid prototyping and game jams. Inspired by LÖVE.">
    <meta name="og:type" content="website">
    <title>UFO Game | Spry</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Roboto+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1691VYRF8G"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-1691VYRF8G');
    </script>
    <link rel="stylesheet" href="static/tachyons.min.css">
    <link id="hljs-light" rel="stylesheet" href="static/atom-one-light.min.css" disabled>
    <link id="hljs-dark" rel="stylesheet" href="static/default-dark.min.css" disabled>
    <script src="static/highlight.min.js"></script>
    <script defer src="static/alpine.js"></script>
    <link rel="stylesheet" href="static/style.css">
    <script>
      const doc = document.documentElement
      const prefersDark = localStorage.theme === undefined && window.matchMedia('(prefers-color-scheme: dark)').matches
      if (localStorage.theme === 'dark' || prefersDark) {
        doc.classList.add('dark-mode')
        document.getElementById('hljs-dark').removeAttribute('disabled')
      } else {
        document.getElementById('hljs-light').removeAttribute('disabled')
      }

      function toggleTheme() {
        const doc = document.documentElement
        if (doc.classList.contains('dark-mode')) {
          doc.classList.remove('dark-mode')
          localStorage.theme = 'light'
          document.getElementById('hljs-light').removeAttribute('disabled')
          document.getElementById('hljs-dark').setAttribute('disabled', 'disabled')
        } else {
          doc.classList.add('dark-mode')
          localStorage.theme = 'dark'
          document.getElementById('hljs-dark').removeAttribute('disabled')
          document.getElementById('hljs-light').setAttribute('disabled', 'disabled')
        }
      }
    </script>
  </head>
  <body class="ph3 black bg-near-white dm-bg-near-black dm-light-gray">
    <div
      class="fixed top-0 left-0 right-0 bb b--black-10 dm-b--white-10 bg-white-90 dm-bg-black-90 ph3"
      style="height: 3.5rem; z-index: 100"
    >
      <div class="mw8 center flex items-center justify-between h-100">
        <a class="link dim black dm-white f3 fw6" href="index.html">Spry</a>
        <div class="flex items-center">
          <nav class="dn db-ns">
            <div
              x-data="{ open: false }"
              class="mr3 dib relative"
              @mouseover="open = true"
              @mouseleave="open = false"
              @click.outside="open = false"
            >
              <button @click="open = true" class="flex items-center dark-gray dm-silver pb3 nb3 bn bg-transparent pa0">
                <span class="mr1" style="cursor: default">Guides</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px" class="gray">
                  <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                </svg>
              </button>
              <ul
                x-cloak
                x-show="open"
                x-transition.opacity.scale.origin.top.right
                class="absolute right-0 list shadow-sm ba pv1 b--black-10 dm-b--white-10 pl0 mv0 bg-white dm-bg-near-black nowrap br2"
                style="top: 1.8rem"
              >
                                  <li>
                    <a href="quick-start.html" class="ph3 pv2 hover-bg-near-white dm-hover-bg-black-50 link dark-gray dm-silver db">
                      Quick Start                    </a>
                  </li>
                                  <li>
                    <a href="ufo-game.html" class="ph3 pv2 hover-bg-near-white dm-hover-bg-black-50 link dark-gray dm-silver db">
                      UFO Game                    </a>
                  </li>
                                  <li>
                    <a href="hot-reload.html" class="ph3 pv2 hover-bg-near-white dm-hover-bg-black-50 link dark-gray dm-silver db">
                      Hot Reloading                    </a>
                  </li>
                                  <li>
                    <a href="distribution.html" class="ph3 pv2 hover-bg-near-white dm-hover-bg-black-50 link dark-gray dm-silver db">
                      Distribution                    </a>
                  </li>
                              </ul>
            </div>
            <a class="mr3 dark-gray dm-silver link underline-hover" href="docs.html">API Reference</a>
          </nav>
          <button class="bg-transparent bn gray dim pointer" type="button" onclick="toggleTheme()" style="padding-top: 1px">
            <svg class="dib dm-dn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px">
              <path d="M10 2a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 2zM10 15a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 15zM10 7a3 3 0 100 6 3 3 0 000-6zM15.657 5.404a.75.75 0 10-1.06-1.06l-1.061 1.06a.75.75 0 001.06 1.06l1.06-1.06zM6.464 14.596a.75.75 0 10-1.06-1.06l-1.06 1.06a.75.75 0 001.06 1.06l1.06-1.06zM18 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0118 10zM5 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 015 10zM14.596 15.657a.75.75 0 001.06-1.06l-1.06-1.061a.75.75 0 10-1.06 1.06l1.06 1.06zM5.404 6.464a.75.75 0 001.06-1.06l-1.06-1.06a.75.75 0 10-1.061 1.06l1.06 1.06z" />
            </svg>
            <svg class="dn dm-dib" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px">
              <path fill-rule="evenodd" d="M7.455 2.004a.75.75 0 01.26.77 7 7 0 009.958 7.967.75.75 0 011.067.853A8.5 8.5 0 116.647 1.921a.75.75 0 01.808.083z" clip-rule="evenodd" />
            </svg>
          </button>
          <nav x-cloak x-data="{ open: false }" class="dn-ns pl3">
            <button @click="open = !open" type="button" class="gray bn bg-transparent">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="20" height="20">
                <path fill-rule="evenodd" d="M2 6.75A.75.75 0 012.75 6h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 6.75zm0 6.5a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z" clip-rule="evenodd" />
              </svg>
            </button>
            <div x-show="open" @click="open = false" x-transition.opacity class="fixed absolute--fill bg-white-50 dm-bg-black-50">
            </div>
            <ul
              class="fixed mv0 top-0 bottom-0 right-0 bg-white dm-bg-near-black list shadow-sm ba b--black-10 dm-b-white-10 pl3 pt3"
              style="transition: transform 150ms; width: 70%; z-index: 1000"
              :style="{ transform: open ? 'translateX(0)' : 'translateX(100%)' }"
            >
                              <li>
                  <a href="quick-start.html" class="dark-gray dm-silver link underline-hover dib pt3 pb2">
                    Quick Start                  </a>
                </li>
                              <li>
                  <a href="ufo-game.html" class="dark-gray dm-silver link underline-hover dib pt3 pb2">
                    UFO Game                  </a>
                </li>
                              <li>
                  <a href="hot-reload.html" class="dark-gray dm-silver link underline-hover dib pt3 pb2">
                    Hot Reloading                  </a>
                </li>
                              <li>
                  <a href="distribution.html" class="dark-gray dm-silver link underline-hover dib pt3 pb2">
                    Distribution                  </a>
                </li>
                            <li>
                <a href="docs.html" class="dark-gray dm-silver link underline-hover dib pt3 pb2">
                  API Reference
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <div style="margin-top: 3.5rem">
        <div class="mw7 center prose pt3"><h1>UFO Game</h1>
<video controls class="w-100 mw7 center db">
  <source src="static/ufo-demo.webm" type="video/webm">
</video>
<p>We'll be creating a little demo that sees a UFO move around the screen using
the keyboard. Create a new folder, then add the following code to a new
<code>main.lua</code> file:</p>
<pre><code class="language-lua">function spry.conf(t)
  t.window_title = 'UFO Demo'
end</code></pre>
<p><a href="https://kenney.nl/assets/alien-ufo-pack">kenney.nl</a> provides free
(public domain) game assets. One of the asset packs includes
<a href="static/green-ufo.png">a green UFO</a>. Add it to the game folder, and load it
using <code>spry.image_load</code>.</p>
<pre><code class="language-lua">function spry.start()
  ufo = spry.image_load 'green-ufo.png'
end</code></pre>
<h2>Player Class</h2>
<p>We'll create a new file called <code>player.lua</code> with the following contents:</p>
<pre><code class="language-lua">class 'Player'

function Player:new()
  self.x = spry.window_width() / 2
  self.y = spry.window_height() / 2
end

function Player:draw()
  ufo:draw(self.x, self.y)
end</code></pre>
<p>Inside <code>spry.start</code>, We'll create a new player back in the <code>main.lua</code> file:</p>
<pre><code class="language-lua">function spry.start()
  ufo = spry.image_load 'green-ufo.png'
  player = Player()
end</code></pre>
<p><code>Player()</code> calls the <code>Player:new</code> method. The player's x and y position is
one half of the window's width and height. In other words, we're setting the
player's position to the center of the screen.</p>
<p><code>Player:draw</code> uses the ufo image that we load during program startup in
<code>spry.start</code>. The image is drawn with the player's x and y position.</p>
<p>Let's create <code>spry.frame</code> in <code>main.lua</code>. In this function, we'll draw the
player:</p>
<pre><code class="language-lua">function spry.frame(dt)
  player:draw()
end</code></pre>
<p>You do not need to include the newly created file inside <code>main.lua</code>. All Lua
scripts in your project folder are loaded on startup. Once you run your game,
you should see a ufo on the screen:</p>
<pre><code class="language-plaintext">spry.exe my_folder</code></pre>
<h2>Keyboard Input</h2>
<p>We'll use keyboard input to move the player. Create a new <code>Player:update</code>
method:</p>
<pre><code class="language-lua">function Player:update(dt)
  local vx, vy = 0, 0

  if spry.key_down 'w' then vy = vy - 1 end
  if spry.key_down 's' then vy = vy + 1 end
  if spry.key_down 'a' then vx = vx - 1 end
  if spry.key_down 'd' then vx = vx + 1 end
end</code></pre>
<p><code>vx</code> and <code>vy</code> stands for velocity x, and velocity y. These variables represent
the player's horizonal and vertical speed. When the user presses any of the
WASD keys, the velocity changes appropriately. In the case of the D key, <code>vx</code>
is set to itself, plus 1, representing movement towards the right side of the
screen.</p>
<p>Now we'll move the player by setting the x and y position. Put the following
code inside <code>Player:update</code>, just before the function ends:</p>
<pre><code class="language-lua">local move_speed = 200
self.x = self.x + vx * move_speed * dt
self.y = self.y + vy * move_speed * dt</code></pre>
<p>Whenever we move something, we need to make sure the movement is framerate
independent. This is done by multiplying movement speed by delta time <code>dt</code>
(the time spend between this frame and last frame). We'll pass <code>dt</code> to the
player's update method through <code>spry.update</code>:</p>
<pre><code class="language-lua">function spry.frame(dt)
  player:update(dt)
  player:draw()
end</code></pre>
<p>Run the game again and try moving the UFO using the WASD keys.</p>
<h2>Image Origin</h2>
<p>When drawing the UFO, the image origin starts at the top-left. If you want the
player to be exactly centered, change <code>Player:draw</code>:</p>
<pre><code class="language-lua">function Player:draw()
  local rotation = 0

  -- scale
  local sx = 1
  local sy = 1

  -- image origin
  local ox = ufo:width() / 2
  local oy = ufo:height() / 2

  ufo:draw(self.x, self.y, rotation, sx, sy, ox, oy)
end</code></pre>
<p>Here, we're adding additional info to <code>ufo:draw</code>. To set the image origin to
the center of the image, get the image dimensions with <code>ufo:width</code> and
<code>ufo:height</code>, and divide by 2. In order to set the image origin, we also need
to explicitly set the image's rotation, horizontal scale, and vertical scale
first.</p>
<h2>Movement Fix</h2>
<p>You might notice that moving diagonally is a little faster compared to
vertical or horizonal movement. This is because vertical and horizontal
movement has a speed of 200, but using both vertical and horizontal speeds
together results in a speed of around 282 (square root of 200<sup>2</sup> +
200<sup>2</sup>). We need to normalize <code>vx</code> and <code>vy</code> so that the combined
speed of both <code>vx</code> and <code>vy</code> is always 1.</p>
<p>After setting keyboard input, but before moving the player, add the following line:</p>
<pre><code class="language-lua">vx, vy = normalize(vx, vy)</code></pre>
<p>Run the game again, and you'll see that the player moves at the same speed
regardless of direction.</p></div>
    <footer class="flex flex-wrap center mv5 mw7">
    <div class="w-100 mr-auto pv3 w-auto-ns silver dm-mid-gray">
      &copy; 2023 Jason Liang
    </div>
    <a href="https://jasonliang.js.org/spry/docs.html" class="gray link underline-hover mr3 pv3 dib">
      API Reference
    </a>
    <a href="https://github.com/jasonliang-dev/spry" class="gray link underline-hover pv3 dib">
      GitHub
    </a>
  </footer>
      </div>
    <script>hljs.highlightAll()</script>
  </body>
  </html>
  